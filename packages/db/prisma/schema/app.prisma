model Role {
  id   String @id @default(cuid())
  name String @unique

  users UserRole[]
}

model UserRole {
  userId String
  roleId String

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  role Role @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@id([userId, roleId])
}

model Ministry {
  id          String   @id @default(cuid())
  name        String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  members MinistryMember[]
}

model MinistryMember {
  userId     String
  ministryId String

  user     User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  ministry Ministry @relation(fields: [ministryId], references: [id], onDelete: Cascade)

  @@id([userId, ministryId])
}

model Zone {
  id          String  @id @default(cuid())
  name        String
  description String?

  pastorId String
  pastor   User   @relation("ZonePastor", fields: [pastorId], references: [id])

  families Family[]
  members  ZoneMember[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ZoneMember {
  zoneId String
  userId String

  zone Zone @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([zoneId, userId])
}

model Family {
  id          String  @id @default(cuid())
  name        String
  description String?

  zoneId String
  zone   Zone   @relation(fields: [zoneId], references: [id], onDelete: Cascade)

  members User[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum FamilyMemberType {
  FATHER
  MOTHER
  SON
  DAUGHTER
}
